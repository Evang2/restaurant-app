# restaurant-app

> The project aims to develop a mobile application that allows users to make table reservations in restaurants.

---

## 🚀 Features

- **✅ User Registration and Login**: 
   - The user can register with an email and password. 
   - Login uses JWT (JSON Web Token) authentication for secure access.

- **✅ View Restaurant List**: 
   - Display a list of available restaurants fetched from the backend. 
   - Ability to search for restaurants by location or name.

- **✅ Reservation Form**: 
   - Users can select the date, time, and number of people for their reservation. 
   - Reservation details are sent to the backend to store in the database.

- **✅ User Profile**: 
   - View and manage the user's booking history. 
   - Delete or modify future bookings.

---

## 🛠️ Tech Stack

| Layer          | Technology                           |
| -------------- | ------------------------------------ |
| Frontend       |  React Native / css / expo           |
| Backend        |  Node.js / Express                   |
| Database       |  MariaDB                             |
| Authentication |  JWT                                 |

### Frontend:
- **React Native**: Framework for building the mobile app.
- **Expo**: Framework for building and running React Native apps.
- **React Navigation**: Used for navigating between different screens.
- **Axios**: For making HTTP requests to the backend API.
- **AsyncStorage**: To store JWT tokens securely on the device.

### Backend:
- **Node.js**: JavaScript runtime for the server-side logic.
- **Express.js**: Web framework for Node.js.
- **MariaDB**: Relational database for storing user, restaurant, and reservation data.
- **JWT**: Token-based authentication for securing API endpoints.
- **bcrypt**: Library for password hashing.
- **cors**: Middleware for enabling CORS (Cross-Origin Resource Sharing).
- **dotenv**: For managing environment variables.
  
## Setup

### Prerequisites

- **Node.js** (For backend)
- **MariaDB** (For database)
- **Expo** (For running React Native frontend)

---

## 📦 Installation

Clone the repository and install dependencies:
```bash
git clone https://github.com/Evang2/restaurant-app.git
cd restaurant-app
npm install  # or yarn
```

To run the backend server:
Navigate to the backend folder:
```bash
cd restaurant-backend
npm run dev  # Starts the Express backend on localhost
```

To start the frontend (React Native):
Navigate to the frontend folder:
Start the development server:

```bash
cd restaurant-app-js #frontend
npm install
npx expo start
```

Download Expo Go:

Install the Expo Go app on your phone (available on iOS and Android) to scan the QR code generated by the development server. 

---

## 🗃️ Database Setup
This project uses a MariaDB database to store data about restaurants, users, and reservations. Below is the structure of the database, along with the SQL dump to help you set up the database quickly.

### SQL Dump
The restaurantdb database includes the following tables:

- users: Stores user information, including the user's name, email, and password.

- restaurants: Stores restaurant information, including name, location, and description.

- reservations: Stores reservation data, including the user, restaurant, date, time, and number of people.

### Table Structure
- users Table
```
CREATE TABLE `users` (
  `user_id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL,
  `password` varchar(255) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
```
- restaurants Table
```
CREATE TABLE `restaurants` (
  `restaurant_id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  `location` varchar(255) NOT NULL,
  `description` text DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
  
```

- reservations Table
```
CREATE TABLE `reservations` (
  `reservation_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `restaurant_id` int(11) NOT NULL,
  `date` date NOT NULL,
  `time` time NOT NULL,
  `people_count` int(11) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
```

### Data Import
You can import the provided SQL dump into your MariaDB database. (the sql file is in the models subfolder on the backend folder) Here's how:

Create the database:

sql
```
CREATE DATABASE restaurantdb;
```
Import the SQL dump:

Save the SQL dump to a file (restaurantdb.sql), then run the following command:

bash
```
mysql -u your_db_user -p your_db_name < restaurantdb.sql
Replace your_db_user and your_db_name with your actual MariaDB username and database name.
```

## 🔧 Configuration

Create a .env file in the backend root folder and add the following environment variables:

```
PORT=3000
DB_HOST=your_db_host
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_NAME=your_db_name
JWT_SECRET=your_jwt_secret
```
Make sure to replace the placeholders (your_db_host, your_db_user, etc.) with the actual values for your environment.


---

## 📝 API Endpoints
### Authentication:
- POST /api/auth/register: Register a new user.

Request Body:
{
  "name": "string",
  "email": "string",
  "password": "string"
}

Response:
{
  "message": "User registered successfully"
}

- POST /api/auth/login: Log in and obtain a JWT token.

Request Body:
{
  "email": "string",
  "password": "string"
}

Response:
{
  "token": "your-jwt-token"
}

### Restaurants:
- GET /api/restaurants: Retrieve a list of all restaurants.

Response: A list of restaurant objects.

- GET /api/restaurants/search: Search for restaurants by name or location.

Query Parameters: name, location

Response: A list of matching restaurants.

- GET /api/restaurants/:id: Retrieve specific restaurant details by ID.

Response: Restaurant details.

### Reservations:
- POST /api/reservations: Create a new reservation.

Request Body:
{
  "restaurant_id": "integer",
  "date": "YYYY-MM-DD",
  "time": "HH:MM",
  "people_count": "integer"
}

Response:
{
  "message": "Reservation created successfully"
}

- GET /api/reservations/user/reservations: Retrieve the logged-in user's reservations.

Response: A list of the user's reservations.

- PUT /api/reservations/update: Update an existing reservation.

Request Body:
{
  "reservation_id": "integer",
  "date": "YYYY-MM-DD",
  "time": "HH:MM",
  "people_count": "integer"
}

Response:
{
  "message": "Reservation updated successfully"
}
- DELETE /api/reservations/:reservation_id: Delete a reservation.

Response:
{
  "message": "Reservation deleted successfully"
}

## License
This project is licensed under the ISC License.


